
## Virtual Environments
Using __virtual environments__ is good standard practice when using Python. A virtual environment is a standalone Python interpreter and isolated installed packages unique to that environment. 
## Benefits of Virtual Environments
Virtual environments keep the Python version and stand-alone package versions all in the same place. If two different projects use two different versions of Python or use two different versions of an installed 3rd-party package, virtual environments can seperate these two installations seperate. 
## Get the current Python interpreter
The file path to the current running Python interpreter can be accessed using the **sys** module. ```sys.prefix``` will output the system path for the running Python interpreter
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">prefix</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;/home/tribilium/anaconda3/envs/book&#39;</pre>
</div>

</div>

</div>
</div>

</div>
## Get a list of installed packages
A list of installed packages in the current environment can be accessed using the **site** module. ```site.getsitepackages()``` will return the file path where the site-packages are stored. The code below will list all of the installed packages using the **os** module and ```os.listdir()``` to list the contents of the directory where all the site-packages are stored.
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">site</span>
<span class="n">site</span><span class="o">.</span><span class="n">getsitepackages</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">getsitepackages</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;jinja2&#39;,
 &#39;asn1crypto&#39;,
 &#39;ipython_genutils-0.2.0-py3.6.egg-info&#39;,
 &#39;alabaster&#39;,
 &#39;requests&#39;,
 &#39;Pygments-2.2.0-py3.6.egg-info&#39;,
 &#39;urllib3&#39;,
 &#39;pandas-0.22.0-py3.6.egg-info&#39;,
 &#39;jupyterlab_launcher-0.10.5-py3.6.egg-info&#39;,
 &#39;widgetsnbextension&#39;,
 &#39;notebook-5.4.1-py3.6.egg-info&#39;,
 &#39;pyzmq-17.0.0-py3.6.egg-info&#39;,
 &#39;mistune.py&#39;,
 &#39;pyOpenSSL-17.5.0-py3.6.egg-info&#39;,
 &#39;mkl_fft&#39;,
 &#39;OpenSSL&#39;,
 &#39;pexpect-4.4.0-py3.6.egg-info&#39;,
 &#39;mkl_random&#39;,
 &#39;jupyter_client-5.2.3-py3.6.egg-info&#39;,
 &#39;qtconsole-4.3.1-py3.6.egg-info&#39;,
 &#39;mistune-0.8.3-py3.6.egg-info&#39;,
 &#39;jupyterlab-0.31.12-py3.6.egg-info&#39;,
 &#39;snowballstemmer-1.2.1-py3.6.egg-info&#39;,
 &#39;pandas&#39;,
 &#39;fastcache&#39;,
 &#39;sphinxcontrib&#39;,
 &#39;parso-0.1.1-py3.6.egg-info&#39;,
 &#39;certifi-2018.01.18-py3.6.egg-info&#39;,
 &#39;sympy&#39;,
 &#39;tornado-4.5.3.dist-info&#39;,
 &#39;sphinxcontrib_websupport-1.0.1-py3.6-nspkg.pth&#39;,
 &#39;_cffi_backend.cpython-36m-x86_64-linux-gnu.so&#39;,
 &#39;setuptools&#39;,
 &#39;prompt_toolkit-1.0.15-py3.6.egg-info&#39;,
 &#39;sip.pyi&#39;,
 &#39;traitlets&#39;,
 &#39;PySocks-1.6.8-py3.6.egg-info&#39;,
 &#39;snowballstemmer&#39;,
 &#39;dateutil&#39;,
 &#39;kiwisolver.cpython-36m-x86_64-linux-gnu.so&#39;,
 &#39;typing-3.6.4-py3.6.egg-info&#39;,
 &#39;nbformat&#39;,
 &#39;bleach&#39;,
 &#39;sipconfig.py&#39;,
 &#39;__pycache__&#39;,
 &#39;urllib3-1.22-py3.6.egg-info&#39;,
 &#39;material&#39;,
 &#39;babel&#39;,
 &#39;PyYAML-3.12-py3.6.egg-info&#39;,
 &#39;parso&#39;,
 &#39;mkl_fft-1.0.0-py3.6.egg-info&#39;,
 &#39;pkg_resources&#39;,
 &#39;jupyter_console&#39;,
 &#39;wcwidth-0.1.7-py3.6.egg-info&#39;,
 &#39;cffi-1.11.5-py3.6.egg-info&#39;,
 &#39;ipython_genutils&#39;,
 &#39;html5lib-1.0.1-py3.6.egg-info&#39;,
 &#39;sockshandler.py&#39;,
 &#39;packaging&#39;,
 &#39;livereload&#39;,
 &#39;pymdownx&#39;,
 &#39;PyQt5&#39;,
 &#39;fastcache-1.0.2-py3.6.egg-info&#39;,
 &#39;Babel-2.5.3-py3.6.egg-info&#39;,
 &#39;imagesize-1.0.0-py3.6.egg-info&#39;,
 &#39;simplegeneric-0.8.1-py3.6.egg-info&#39;,
 &#39;IPython&#39;,
 &#39;easy_install.py&#39;,
 &#39;docutils-0.14-py3.6.egg-info&#39;,
 &#39;jedi&#39;,
 &#39;ipywidgets&#39;,
 &#39;nbformat-4.4.0-py3.6.egg-info&#39;,
 &#39;mkl_random-1.0.1-py3.6.egg-info&#39;,
 &#39;traitlets-4.3.2-py3.6.egg-info&#39;,
 &#39;jsonschema-2.6.0-py3.6.egg-info&#39;,
 &#39;pygments&#39;,
 &#39;jupyter.py&#39;,
 &#39;mpmath&#39;,
 &#39;typing.py&#39;,
 &#39;chardet&#39;,
 &#39;ipywidgets-7.2.0-py3.6.egg-info&#39;,
 &#39;widgetsnbextension-3.2.0-py3.6.egg-info&#39;,
 &#39;ipython-6.3.0-py3.6.egg-info&#39;,
 &#39;testpath-0.3.1-py3.6.egg-info&#39;,
 &#39;pip-9.0.3-py3.6.egg-info&#39;,
 &#39;cycler.py&#39;,
 &#39;kiwisolver-1.0.1-py3.6.egg-info&#39;,
 &#39;mkdocs&#39;,
 &#39;markupsafe&#39;,
 &#39;pyparsing.py&#39;,
 &#39;docutils&#39;,
 &#39;imagesize.py&#39;,
 &#39;pycparser-2.18-py3.6.egg-info&#39;,
 &#39;pickleshare-0.7.4-py3.6.egg-info&#39;,
 &#39;ptyprocess&#39;,
 &#39;socks.py&#39;,
 &#39;pycparser&#39;,
 &#39;ipykernel-4.8.2-py3.6.egg-info&#39;,
 &#39;alabaster-0.7.10-py3.6.egg-info&#39;,
 &#39;numpydoc&#39;,
 &#39;tornado&#39;,
 &#39;webencodings-0.5.1-py3.6.egg-info&#39;,
 &#39;Send2Trash-1.5.0-py3.6.egg-info&#39;,
 &#39;matplotlib-2.2.2-py3.6-nspkg.pth&#39;,
 &#39;mkdocs_material-2.7.2.dist-info&#39;,
 &#39;Jinja2-2.10-py3.6.egg-info&#39;,
 &#39;six.py&#39;,
 &#39;wcwidth&#39;,
 &#39;decorator.py&#39;,
 &#39;webencodings&#39;,
 &#39;backcall-0.1.0-py3.6.egg-info&#39;,
 &#39;send2trash&#39;,
 &#39;entrypoints.py&#39;,
 &#39;python_dateutil-2.7.2-py3.6.egg-info&#39;,
 &#39;asn1crypto-0.24.0-py3.6.egg-info&#39;,
 &#39;requests-2.18.4-py3.6.egg-info&#39;,
 &#39;backcall&#39;,
 &#39;jupyter_client&#39;,
 &#39;test&#39;,
 &#39;mkdocs-0.17.3.dist-info&#39;,
 &#39;pandocfilters.py&#39;,
 &#39;click&#39;,
 &#39;numpydoc-0.8.0-py3.6.egg-info&#39;,
 &#39;pickleshare.py&#39;,
 &#39;testpath&#39;,
 &#39;bleach-2.1.3-py3.6.egg-info&#39;,
 &#39;terminado&#39;,
 &#39;sympy-1.1.1-py3.6.egg-info&#39;,
 &#39;pip&#39;,
 &#39;src&#39;,
 &#39;pandocfilters-1.4.2-py3.6.egg-info&#39;,
 &#39;terminado-0.8.1-py3.6.egg-info&#39;,
 &#39;jupyter_console-5.2.0-py3.6.egg-info&#39;,
 &#39;MarkupSafe-1.0-py3.6.egg-info&#39;,
 &#39;Sphinx-1.7.2-py3.6.egg-info&#39;,
 &#39;numpy-1.14.2-py3.6.egg-info&#39;,
 &#39;sphinxcontrib_websupport-1.0.1-py3.6.egg-info&#39;,
 &#39;jupyter_core&#39;,
 &#39;nbconvert&#39;,
 &#39;entrypoints-0.2.3-py3.6.egg-info&#39;,
 &#39;yaml&#39;,
 &#39;gmpy2.cpython-36m-x86_64-linux-gnu.so&#39;,
 &#39;jedi-0.11.1-py3.6.egg-info&#39;,
 &#39;qtconsole&#39;,
 &#39;decorator-4.2.1-py3.6.egg-info&#39;,
 &#39;sip.so&#39;,
 &#39;jupyterlab&#39;,
 &#39;mpmath-1.0.0-py3.6.egg-info&#39;,
 &#39;zmq&#39;,
 &#39;cycler-0.10.0-py3.6.egg-info&#39;,
 &#39;prompt_toolkit&#39;,
 &#39;idna-2.6-py3.6.egg-info&#39;,
 &#39;pyparsing-2.2.0-py3.6.egg-info&#39;,
 &#39;certifi&#39;,
 &#39;jsonschema&#39;,
 &#39;matplotlib-2.2.2-py3.6.egg-info&#39;,
 &#39;mpl_toolkits&#39;,
 &#39;cryptography&#39;,
 &#39;jupyter-1.0.0-py3.6.egg-info&#39;,
 &#39;pytz&#39;,
 &#39;sipdistutils.py&#39;,
 &#39;pymdown_extensions-4.9.2.dist-info&#39;,
 &#39;six-1.11.0-py3.6.egg-info&#39;,
 &#39;ptyprocess-0.5.2-py3.6.egg-info&#39;,
 &#39;numpy&#39;,
 &#39;_yaml.cpython-36m-x86_64-linux-gnu.so&#39;,
 &#39;README.txt&#39;,
 &#39;html5lib&#39;,
 &#39;markdown&#39;,
 &#39;pytz-2018.3-py3.6.egg-info&#39;,
 &#39;ipykernel&#39;,
 &#39;idna&#39;,
 &#39;nbconvert-5.3.1-py3.6.egg-info&#39;,
 &#39;ipykernel_launcher.py&#39;,
 &#39;sphinx&#39;,
 &#39;gmpy2-2.0.8-py3.6.egg-info&#39;,
 &#39;notebook&#39;,
 &#39;cryptography-2.2.1-py3.6.egg-info&#39;,
 &#39;simplegeneric.py&#39;,
 &#39;livereload-2.5.1-py3.6.egg-info&#39;,
 &#39;setuptools-39.0.1-py3.6.egg-info&#39;,
 &#39;Markdown-2.6.11.dist-info&#39;,
 &#39;jupyter_core-4.4.0-py3.6.egg-info&#39;,
 &#39;pylab.py&#39;,
 &#39;jupyterlab_launcher&#39;,
 &#39;cffi&#39;,
 &#39;packaging-17.1-py3.6.egg-info&#39;,
 &#39;click-6.7-py3.6.egg-info&#39;,
 &#39;wheel-0.31.0-py3.6.egg-info&#39;,
 &#39;chardet-3.0.4-py3.6.egg-info&#39;,
 &#39;pexpect&#39;,
 &#39;wheel&#39;,
 &#39;matplotlib&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
## Virtual environments with conda
The **Anaconda Prompt** is useful for installing third party packages and creating virtual environments. To create the new virtual environment, issue the following command at the **Anaconda Prompt**:

```text
> conda create --name <env_name> python=3.6
```

The ```conda create``` command builds the new virtual environment. The ```--name <env_name>``` flag gives our new virtual environment the name ```<env_name>```. Replace ```<env_name>``` with the name of the new virtual envirnment. Including ```python=3.6``` ensures that the virtual environment has an up to date version of Python. 

After issuing the command, the output will be something like:

```text
The following NEW packages will be INSTALLED:

    certifi:        2016.2.28-py36_0
    pip:            9.0.1-py36_1
    python:         3.6.2-0
    setuptools:     36.4.0-py36_0
    vs2015_runtime: 14.0.25420-0
    wheel:          0.29.0-py36_0
    wincertstore:   0.2-py36_0

Proceed ([y]/n)? y
```

Type ```y``` to confirm and create the new virtual environment. To use the new virtual environment, it needs to be  _activate_. A virtual envirnoment is activated by typing the command below. Note that ```<env_name>``` needs to be replaced by the name of the virtual environment.

```text
>  conda activate <env_name>
```

You know you are in your virtual environment ```<env_name>``` when ```(<env_name>)``` is in parenthesis at the start of the prompt:

```text
> (webscrape)
```

To deactivate an active environment, use:

```text
> conda deactivate
```


If you see the ```(<env_name>)``` in parenthesis before the command prompt, that means the new virtual environment is set up and active. A list of your virtual environments can be accessed using the command ```conda info --envs``` or ```conda env list```.

```text
> conda info --envs

# conda environments:
#
matplotlib               /home/tribilium/anaconda3/envs/matplotlib
webscrape              * /home/tribilium/anaconda3/envs/pelican
base                     /home/tribilium/anaconda3
```

Notice the ``` * ``` asterisk on the line with ```webscrape```. The virtual environment with the ``` * ``` is currently active. 

To exit the virtual environment, use the command ```conda deactivate```. If ```conda env list``` is run again, there will  not be an asterisk ```*``` in front of ```webscrape```. That's because ```webscrape``` is not the active virtual environment.

```text
> conda env list

# conda environments:
#
matplotlib               /home/tribilium/anaconda3/envs/matplotlib
webscrape                /home/tribilium/anaconda3/envs/pelican
base                  *  /home/tribilium/anaconda3
```
## Virtual environments with pip and virtualenv
Virtual environments can also be created with **pip**, and a 3rd-party python environment manager **virtualenv**. **virtualenv** is a Python package used to create and manage virtual environments. To use **virtualenv**, first make sure it is installed using **pip** at the commandline.

```text
$ pip install virtualenv
```

Once installed, **virtualenv** will create a new virtual environment with the command below. Note ```<env_name>``` needs to be replaced by the name of the new virtual environment.

```text
$ virtualenv <env_name>
```

To activate the virtual environment use the command:

```text
$ source bin/activate
```

Once active, the virtual environment name will be shown in parenthesis ```()``` before the command prompt

```text
(<env_name>)$
```

The location of the Python interpreter being used by the currenly active virtual environment can be found with:

```text
(<env_name>)$ which python
/Users/peter/<env_name>/bin/python
```

To exit the virtual environment use the command ```deactivate```:

```text
(<env_name>)$ deactivate
```

When the virtual environment is no longer active, there will be no environment name before the command prompt. A check for the current Python interpreter will return a different path than before when the virtual environment was active

```text
$ which python
/usr/bin/python
```

 

